<!DOCTYPE html>
<html lang="ko"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v8.4.0 <https://hydejack.com/>
-->











<head>
  



<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">




  
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>운영서버 배포에 대한 나의 생각 | YaLim</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="운영서버 배포에 대한 나의 생각" />
<meta name="author" content="<firstname> <lastname>" />
<meta property="og:locale" content="ko" />
<meta name="description" content="The power to change the world." />
<meta property="og:description" content="The power to change the world." />
<link rel="canonical" href="http://localhost:4000/think/2019-05-10-%EC%9A%B4%EC%98%81%EB%B0%B0%ED%8F%AC%EC%97%90-%EB%8C%80%ED%95%9C%EC%83%9D%EA%B0%81/" />
<meta property="og:url" content="http://localhost:4000/think/2019-05-10-%EC%9A%B4%EC%98%81%EB%B0%B0%ED%8F%AC%EC%97%90-%EB%8C%80%ED%95%9C%EC%83%9D%EA%B0%81/" />
<meta property="og:site_name" content="YaLim" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-10T00:00:00+09:00" />
<script type="application/ld+json">
{"description":"The power to change the world.","author":{"@type":"Person","name":"<firstname> <lastname>"},"@type":"BlogPosting","url":"http://localhost:4000/think/2019-05-10-%EC%9A%B4%EC%98%81%EB%B0%B0%ED%8F%AC%EC%97%90-%EB%8C%80%ED%95%9C%EC%83%9D%EA%B0%81/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/"},"name":"<firstname> <lastname>"},"headline":"운영서버 배포에 대한 나의 생각","dateModified":"2019-05-10T00:00:00+09:00","datePublished":"2019-05-10T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/think/2019-05-10-%EC%9A%B4%EC%98%81%EB%B0%B0%ED%8F%AC%EC%97%90-%EB%8C%80%ED%95%9C%EC%83%9D%EA%B0%81/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  


<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="YaLim">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<meta name="application-name" content="YaLim">
<meta name="msapplication-config" content="/assets/ieconfig.xml">


<meta name="theme-color" content="rgb(25,55,71)">


<meta name="generator" content="Hydejack v8.4.0" />

<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="YaLim" />



<link rel="alternate" href="http://localhost:4000/think/2019-05-10-%EC%9A%B4%EC%98%81%EB%B0%B0%ED%8F%AC%EC%97%90-%EB%8C%80%ED%95%9C%EC%83%9D%EA%B0%81/" hreflang="ko">

<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/assets/icons/icon.png">

<link rel="manifest" href="/assets/manifest.json">


  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">




<link rel="dns-prefetch" href="/" id="_baseURL">
<link rel="dns-prefetch" href="/assets/js/hydejack-8.4.0.js" id="_hrefJS">
<link rel="dns-prefetch" href="/sw.js" id="_hrefSW">
<link rel="dns-prefetch" href="/assets/bower_components/fontfaceobserver/fontfaceobserver.standalone.js" id="_hrefFFO">
<link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js" id="_hrefKatexJS">
<link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_hrefKatexCSS">
<link rel="dns-prefetch" href="/assets/bower_components/katex/dist/contrib/copy-tex.min.js" id="_hrefKatexCopyJS">
<link rel="dns-prefetch" href="/assets/bower_components/katex/dist/contrib/copy-tex.min.css" id="_hrefKatexCopyCSS">
<link rel="dns-prefetch" href="/assets/img/swipe.svg" id="_hrefSwipeSVG">




<script>!function(e,t){"use strict";function n(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}e.loadJS=function(e,r){var o=t.createElement("script");o.src=e,r&&n(o,"load",r,{once:!0});var a=t.scripts[0];return a.parentNode.insertBefore(o,a),o},e._loaded=!1,e.loadJSDeferred=function(r,o){function a(){e._loaded=!0,o&&n(d,"load",o,{once:!0});var r=t.scripts[0];r.parentNode.insertBefore(d,r)}var d=t.createElement("script");return d.src=r,e._loaded?a():n(e,"load",a,{once:!0}),d},e.setRel=e.setRelStylesheet=function(e){function n(){this.rel="stylesheet"}var r=t.getElementById(e);r.addEventListener?r.addEventListener("load",n,{once:!0}):r.onload=n}}(window,document);
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
</script>

<script>!function(w, d) {
    w._noPushState = false;
    w._noDrawer = false;

    /**/
    loadJS(d.getElementById('_hrefFFO').href, function() {
      if ('Promise' in w) Promise.all([
        new FontFaceObserver('Noto Sans').load(),
        new FontFaceObserver('Roboto Slab').load(),
      ]).then(function f() { d.body.classList.add('font-active'); }, function() {});
    });
    /**/
}(window, document);</script>

<!--[if gt IE 8]><!---->








  <link rel="stylesheet" href="/assets/css/hydejack-8.4.0.css">
  <link rel="stylesheet" href="/assets/icomoon/style.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400|Noto+Sans:400,400i,700,700i">
    <noscript>
      <style>
        html { font-family: Noto Sans, Helvetica, Arial, sans-serif!important; }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Roboto Slab, Helvetica, Arial, sans-serif!important; }
      </style>
    </noscript>
  


  <style id="_pageStyle">

.content a:not(.btn){color:#4fb1ba;border-color:rgba(79,177,186,0.2)}.content a:not(.btn):hover{border-color:#4fb1ba}:focus{outline-color:#4fb1ba !important}.btn-primary{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:focus,.btn-primary.focus,.form-control:focus,.form-control.focus{box-shadow:0 0 0 3px rgba(79,177,186,0.5)}.btn-primary:hover,.btn-primary.hover{color:#fff;background-color:#409ba3;border-color:#409ba3}.btn-primary:disabled,.btn-primary.disabled{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:active,.btn-primary.active{color:#fff;background-color:#409ba3;border-color:#409ba3}::selection{color:#fff;background:#4fb1ba}::-moz-selection{color:#fff;background:#4fb1ba}

</style>


<!--<![endif]-->




</head>

<body>
  <div id="_navbar" class="navbar fixed-top">
  <div class="content">
    <div class="nav-btn-bar">
      <span class="sr-only">Jump to:</span>
      <a id="_menu" class="nav-btn no-hover fl" href="#_navigation">
        <span class="sr-only">Navigation</span>
        <span class="icon-menu"></span>
      </a>
    </div>
  </div>
</div>
<hr class="sr-only" hidden />


<hy-push-state
  replace-ids="_main"
  link-selector="a[href]:not([href*='/assets/']):not(.external):not(.no-push-state)"
  duration="250"
  script-selector="script:not([type^='math/tex'])"
  prefetch
>
  
    <main
  id="_main"
  class="content fade-in layout-post"
  role="main"
  data-color="rgb(79,177,186)"
  data-theme-color="rgb(25,55,71)"
  
    data-image="/assets/img/sidebar-bg.jpg"
    data-overlay
  
  >
  




<article id="post-think-운영배포에-대한생각" class="page post mb6" role="article">
  <header>
    <h1 class="post-title">
      
        운영서버 배포에 대한 나의 생각
      
    </h1>

    <p class="post-date heading">
      
      <time datetime="2019-05-10T00:00:00+09:00">10 May 2019</time>
      
      
      
      
      









in <a href="/think/" class="flip-title">Think</a>

      











    </p>

    
    

    



  <div class="hr pb0"></div>


  </header>

  
    <p>운영 배포에 대한 생각</p>

<h2 id="운영서버-배포에-대한-나의-생각">운영서버 배포에 대한 나의 생각</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.안전 하게 배포가 되어야한다. 
2.배포된 소스에 대한 신뢰가 있어야한다.
3.롤백이 간편하여야한다.
</code></pre></div></div>

<h3 id="1안전하게-배포-되어야한다">1.안전하게 배포 되어야한다.</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>배포를 하다가 실패하는 경우가 종종 있었다. 
배포 실패 원인을 분석하고 해결해야한다. 
이런 상황은 빈번하였으며 문제는 배포 파일의 용량이 커서 도중에 실패하는 경우였다.
배포 실패의 가능성을 염두하고 있는 나지만 실제로 배포 하다 실패하는경우를 마주하게되면...
진땀이 나고.. 긴장을 하게된다. 

이러한 문제는 자동화에 대한 완벽한 지식이없다면 오히려 자동화가 실패하였을 경우 
불필요한 작업자의 긴장감만 과중되어 업데이트를 진행함에 있어 불안한 시간의 연속이된다.

이를 해결하기 위해서는 반자동화를 사용해야할지도 모른다.
때로는 무식한 방법이 확실한 방법이 된다. 

현재 나의 시스템에서는 자동화 배포 되신 ansible을 활용하여 미리 소스를 위치한 후 
와스를 내린 상태에서 기존의 소스와 교체를 해주고 있다. 

배포를 하다 실패하는 경우는 없어야한다. 
불필요한 작업자의 긴장감만 가중시킬 뿐이다.
</code></pre></div></div>

<h3 id="2배포된-소스에-대한-신뢰가-있어야한다">2.배포된 소스에 대한 신뢰가 있어야한다.</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>배포된 소스가 테스트가 완료된 내용인지에 대한 확신이있어야한다. 
이는 당연한 이야기다.
이를위해서 빌드 버전, 빌드시간등을 기록한 파일을 직접 확인하여 안도의 한숨을 쉰다.

작업자는 항상 확신을 가져아한다.
</code></pre></div></div>

<h3 id="3롤백은-간편해야한다">3.롤백은 간편해야한다.</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>배포 후 최종 테스트 혹은 엄데이트 완료 후 문제가 발생된다면 이전 업데이트 전으로 소스를 롤백해야한다.
롤백을 손쉽게 해야하는데 ... 
롤백을 쉽게 하지 못한다면 다시한번 긴장의 연속이 되겠다. 
롤백을 한 후에도 확신으 가져야한다. 
이전과 머라도 하나 변한게 없는지 확신을 갖아야하는데 소스 뿐 아니라 관련된 프로퍼티, 파일 등등
모든게 이전의 상태로 돌아가야한다. 
사실 롤백의 경험이 없기 때문에 운영상의 업데이트가 실패하는 경험도 있어야 한다고 생각한다.
최악의 경우에 대한 대비가 되어있다면 좋을테니 말이다. 

롤백은 간편해야한다.
</code></pre></div></div>

<h3 id="결론">결론</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>방법의 차이는 분명 존재한다. 
직접 하는 사람이 배포를 함에 있어서 불안감을 갖을 필요는 없다고 생각한다.
자동화는 편리하다. 하지만 자동화를 이용할 땐 적어도 원리와 오류에 대한 지식이 뒷받힘 되어야한다.
때로는 가장 무식한 방법이 가장 확실한 방법이 된다. 
결정은 작업자의 몫 무엇이 옳고 그름은 없다고 생각한다. 
</code></pre></div></div>

  
</article>


<hr class="dingbat related" />




  
     


  <aside class="about related mt4 mb4" role="complementary">
    
    

<div class="author mt4">
  

  
    


  <hy-img
    
    src="https://placehold.it/128x128"
    class="avatar"
    alt="<firstname> <lastname>"
    srcset="https://placehold.it/128x128 1x,https://placehold.it/256x256 2x"
    
  
    
    root-margin="512px"
  >
    <noscript><img data-ignore 
    src="https://placehold.it/128x128"
    class="avatar"
    alt="<firstname> <lastname>"
    srcset="https://placehold.it/128x128 1x,https://placehold.it/256x256 2x"
    
  /></noscript>
    <span class="loading" slot="loading" hidden>
      <span class="icon-cog"></span>
    </span>
  </hy-img>


  

  
  
  <h2  class="page-title hr">
    About
  </h2>

  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

<p>Open <code class="highlighter-rouge">_data/authors.yml</code> to edit this text.</p>

<p><a href="https://github.com/qwtel/hydejack-starter-kit/archive/v8.1.1.zip">Download Free</a>
– or –
<a href="https://app.simplegoods.co/i/NATYVLYT">Buy PRO</a></p>



  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://instagram.com/jooa0202" title="Instagram" class="no-mark-external">
      <span class="icon-instagram"></span>
      <span class="sr-only">Instagram</span>
    </a>
  </li>


    
  
</ul>

  </div>
</div>

  </aside>


  

  
  

  
    




  

  
  


  

  
<footer role="contentinfo">
  <hr/>
  
    <p><small class="copyright">© 2018. All rights reserved.
</small></p>
  
  
  <p><small>Powered by <a class="external" href="https://hydejack.com/">Hydejack</a> v<span id="_version">8.4.0</span></small></p>
  <hr class="sr-only"/>
</footer>


</main>

    <hy-drawer
  class=""
  align="left"
  threshold="10"
  touch-events
  prevent-default
>
  <header id="_sidebar" class="sidebar" role="banner">
    
    <div class="sidebar-bg sidebar-overlay" style="background-color:rgb(25,55,71);background-image:url(/assets/img/sidebar-bg.jpg)"></div>

    <div class="sidebar-sticky">
      <div class="sidebar-about">
<!--        -->
<!--          <a class="no-hover" href="/" tabindex="-1">-->
<!--            <img src="" class="avatar" alt="YaLim" data-ignore />-->
<!--          </a>-->
<!--        -->
        <h2 class="h1"><a href="/">YaLim</a></h2>
        
        
          <p class="">
            The power to change the world.

          </p>
        
      </div>

      <nav class="sidebar-nav heading" role="navigation">
        <span class="sr-only">Navigation:</span>
<ul>
  
    
      
      <li>
        <a
          id="_navigation"
          href="/yalim/"
          class="sidebar-nav-item"
          
        >
          yalim
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/think/"
          class="sidebar-nav-item active"
          
        >
          think
        </a>
      </li>
    
  
</ul>

      </nav>

      

      <div class="sidebar-social">
        <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://instagram.com/jooa0202" title="Instagram" class="no-mark-external">
      <span class="icon-instagram"></span>
      <span class="sr-only">Instagram</span>
    </a>
  </li>


    
  
</ul>

      </div>
    </div>
  </header>
</hy-drawer>
<hr class="sr-only" hidden />

  
</hy-push-state>


  <!--[if !IE]><!---->
  <script>loadJSDeferred(document.getElementById('_hrefJS').href);</script>
  

  <!--<![endif]-->

  


  <script>
    if ('serviceWorker' in navigator) {
      
        navigator.serviceWorker.getRegistration()
          .then(r => r.unregister())
          .catch(() => {});
      
    }
  </script>






<h2 class="sr-only" hidden>Templates (for web app):</h2>

<template id="_animation-template" hidden>
  <div class="animation-main fixed-top">
    <div class="content">
      <div class="page"></div>
    </div>
  </div>
</template>

<template id="_loading-template" hidden>
  <div class="loading nav-btn fr">
    <span class="sr-only">Loading…</span>
    <span class="icon-cog"></span>
  </div>
</template>

<template id="_error-template" hidden>
  <div class="page">
    <h1 class="page-title">Error</h1>
    
    
    <p class="lead">
      Sorry, an error occurred while loading <a class="this-link" href=""></a>.

    </p>
  </div>
</template>

<template id="_back-template" hidden>
  <a id="_back" class="back nav-btn fl no-hover">
    <span class="sr-only">Back</span>
    <span class="icon-arrow-left2"></span>
  </a>
</template>

<template id="_permalink-template" hidden>
  <a href="#" class="permalink">
    <span class="sr-only">Permalink</span>
    <span class="icon-link"></span>
  </a>
</template>




</body>
</html>
