---
layout: post
title: 운영서버 배포에 대한 나의 생각
description: > 
---

운영 배포에 대한 생각

## 운영서버 배포에 대한 나의 생각
~~~ 
1.안전 하게 배포가 되어야한다. 
2.배포된 소스에 대한 신뢰가 있어야한다.
3.롤백이 간편하여야한다.
~~~

### 1.안전하게 배포 되어야한다.
~~~
배포를 하다가 실패하는 경우가 종종 있었다. 
배포 실패 원인을 분석하고 해결해야한다. 
이런 상황은 빈번하였으며 문제는 배포 파일의 용량이 커서 도중에 실패하는 경우였다.
배포 실패의 가능성을 염두하고 있는 나지만 실제로 배포 하다 실패하는경우를 마주하게되면...
진땀이 나고.. 긴장을 하게된다. 

이러한 문제는 자동화에 대한 완벽한 지식이없다면 오히려 자동화가 실패하였을 경우 
불필요한 작업자의 긴장감만 과중되어 업데이트를 진행함에 있어 불안한 시간의 연속이된다.

이를 해결하기 위해서는 반자동화를 사용해야할지도 모른다.
때로는 무식한 방법이 확실한 방법이 된다. 

현재 나의 시스템에서는 자동화 배포 되신 ansible을 활용하여 미리 소스를 위치한 후 
와스를 내린 상태에서 기존의 소스와 교체를 해주고 있다. 

배포를 하다 실패하는 경우는 없어야한다. 
불필요한 작업자의 긴장감만 가중시킬 뿐이다.
~~~

### 2.배포된 소스에 대한 신뢰가 있어야한다.
~~~
배포된 소스가 테스트가 완료된 내용인지에 대한 확신이있어야한다. 
이는 당연한 이야기다.
이를위해서 빌드 버전, 빌드시간등을 기록한 파일을 직접 확인하여 안도의 한숨을 쉰다.

작업자는 항상 확신을 가져아한다.
~~~


### 3.롤백은 간편해야한다.
~~~
배포 후 최종 테스트 혹은 엄데이트 완료 후 문제가 발생된다면 이전 업데이트 전으로 소스를 롤백해야한다.
롤백을 손쉽게 해야하는데 ... 
롤백을 쉽게 하지 못한다면 다시한번 긴장의 연속이 되겠다. 
롤백을 한 후에도 확신으 가져야한다. 
이전과 머라도 하나 변한게 없는지 확신을 갖아야하는데 소스 뿐 아니라 관련된 프로퍼티, 파일 등등
모든게 이전의 상태로 돌아가야한다. 
사실 롤백의 경험이 없기 때문에 운영상의 업데이트가 실패하는 경험도 있어야 한다고 생각한다.
최악의 경우에 대한 대비가 되어있다면 좋을테니 말이다. 

롤백은 간편해야한다.
~~~

### 결론
~~~
방법의 차이는 분명 존재한다. 
직접 하는 사람이 배포를 함에 있어서 불안감을 갖을 필요는 없다고 생각한다.
자동화는 편리하다. 하지만 자동화를 이용할 땐 적어도 원리와 오류에 대한 지식이 뒷받힘 되어야한다.
때로는 가장 무식한 방법이 가장 확실한 방법이 된다. 
결정은 작업자의 몫 무엇이 옳고 그름은 없다고 생각한다. 
~~~